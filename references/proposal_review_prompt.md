# 步骤 4：评审提案

## 使用时机

单 CP 执行模式的第 4 步。在步骤 3（3 道关卡打磨）完成后自动进入。

## Prompt 模板

```
请作为首席架构师评审此提案。

## 评审资料来源

1. **规范依据**
   - 读取 `openspec/project.md` 了解项目规范

2. **历史决策**
   - 查阅 `changes/archive/` 中已归档提案
   - 了解类似功能的历史决策和实现方式

3. **现有实现**
   - 扫描与本次提案相关的已实现代码
   - 确保新提案与现有代码风格、模式一致

## 评审内容

请基于以上资料，重点区分两类冲突：

### Type A（违规）
与现有体系不兼容且无必要的偏离。
- 请直接重写这部分以对齐规范

### Type B（演进）
虽然偏离现有规范，但代表了技术演进方向或更优解。
- 请保留并论证其合理性

## 输出要求

基于以上逻辑输出一份修订报告，包含：
1. 发现的冲突点（按 Type A / Type B 分类）
2. Type A 冲突的重写建议
3. Type B 演进的合理性论证
4. 总体评审结论

【spec-runner 模式】评审完成后：
- Type A 冲突：直接重写并继续
- Type B 演进：保留并记录到 DECISIONS.md
- 评审完成后 → 自动批准，进入**步骤 5：Apply 施工**，不要停下等待确认
```

## 审计日志要求

**步骤开始时**：在 AUDIT.md 时间线中添加

```markdown
| 步骤4：评审提案 | [开始时间] | | | 进行中 |
```

**步骤结束时**：
1. 更新 AUDIT.md 时间线
2. 在 `.audit/` 创建快照（如有文件修改）
3. 如有 Type B 演进，记录到 DECISIONS.md

# 步骤 5：Apply 施工

## 使用时机

单 CP 执行模式的第 5 步。在步骤 4（评审提案）完成后自动批准并进入。

## Prompt 模板

```
specs 已对齐，提案已自动批准（spec-runner 模式）。

请从 tasks.md 开始实现：
- 严格按任务顺序执行
- 每完成一项逐项打勾
- 遇到不明确之处基于项目规范自主决策并记录到 DECISIONS.md
- 使用 TodoWrite 跟踪实时进度

【重要】tasks.md 全部完成后，立即执行测试验证（步骤 6），不要停下等待确认：
- 运行相关单元测试：pytest / npm test
- 运行相关集成测试（如有）
- 测试失败则修复后重测，最多重试 3 次
- 测试全绿后 → 进入**步骤 7：归档**

完成上述所有步骤后，继续下一步骤，不要停下等待确认。
```

## 核心要求

1. **严格按顺序**：不要跳过或重排任务
2. **逐项确认**：每完成一项打勾后再进行下一项
3. **自主决策**：遇到不明确之处基于项目规范自主决策并记录到 DECISIONS.md

## 质量保障

- 每个任务完成后，运行相关测试
- 新功能必须配套自动化测试
- 提交前确保测试全绿

## 审计日志要求

**步骤开始时**：在 AUDIT.md 时间线中添加

```markdown
| 步骤5：Apply施工 | [开始时间] | | | 进行中 |
```

**每个任务完成后**：
1. 在 AUDIT.md 中记录任务进度
2. 在 `.audit/` 创建快照（记录修改的文件）

**步骤结束时**：
1. 更新 AUDIT.md 时间线
2. 汇总所有文件变更到 AUDIT.md 变更索引
